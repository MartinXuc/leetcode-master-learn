[TOC]

# 题目描述

**题目描述**

在餐厅里，洗盘子的工作需要使用到栈这种数据结构。

假设你手里有一个盘子堆放区。现在需要模拟洗盘子的过程，每个盘子都有一个编号。 

盘子堆放区操作说明： 

1. 当操作为 1 时，表示从盘子堆放区拿走顶部的盘子清洗。
2. 当操作为 2 时，表示有未洗的盘子放入盘子堆放区。 

在一系列操作之后，你需要回答：下一个清洗的盘子编号？

**输入描述**

第一行有一个整数 n，代表初始盘子堆放区中盘子的数量为 n。 

第二行有 n 个整数，代表了盘子的编号，同时整数之间的顺序也代表了未洗盘子加入盘子堆放区的顺序。 

第三行为一个整数 m，代表接下来将会有 m 次操作。 

接下来一共有 m 行，代表共有 m 次操作。 

如果是操作 1，那么该行只会有一个数字 1，代表有一个盘子被拿走清洗。 

如果是操作 2，那么该行有两个数字，第一个数字 2 表示有未洗的盘子加入，第二个数字代表未洗的盘子编号。

**输出描述**

输出共一行，为下一个该清洗的盘子编号。 如果没有下一个该清洗的盘子，那么请输出 “All the dishes have been washed.”

**输入示例**

```
5
1001 1002 1003 1004 1005
3
1
1
2 1006
```

**输出示例**

```
1006
```

# 编程小课

## 前言

本节内容我们会通过“洗盘子”的模拟过程接触到栈这种数据结构，具体会包括下列知识点：

- 栈的基本概念（空栈、栈顶、栈底）和特点（先入后出）
- 入栈、出栈、获取栈顶元素和判断栈是否为空栈等基本操作
- 列表模拟栈的使用

## 栈

> 关于栈的更多介绍，[可以移步至代码随想录官方网站查看](https://programmercarl.com/栈与队列理论基础.html)

栈的操作实际上和洗盘子的过程是类似的，洗盘子的过程中，会拿出待清洗那一摞盘子的最顶端的那个盘子，清洗之后将其放在已清洗区域，这对于待清洗盘子来说是**出栈**，对于已清洗区域来说，是**入栈（进栈）**，具体的过程可以看下面的图示：

![](assets/第%2019%20题%20洗盘子/image-20230914143812960-7783864-8908990.png)

栈这种结构只能在一侧（栈顶那一侧）进行插入和删除操作，而且是**后进先出 LIFO**(后进入栈的元素离栈顶比较近，先出来)，允许进行插入和删除的那一端是栈顶，与之对应的另一端是栈底，如果一个栈不包含任何元素，这个栈被称为空栈。

在计算机领域，栈的应用也十分广泛，比如浏览器的历史回退和编写文档时的“撤销”操作。

## 栈的操作

Python 语言确实支持栈数据结构，但它通常是通过**列表**来模拟实现的。

栈的常用操作主要有以下几种：

- 获取栈的长度，即栈中元素的数量，这通过 `len()` 获取列表的长度来实现。
- 进栈操作，将新的元素放入到栈中，新的元素成为栈顶元素，栈顶元素即最后一个元素，这通过 `append()` 操作将新的元素添加到列表中就可以实现。
- 出栈操作，栈顶元素 (列表的最后一个元素) 从栈中离开，可以通过 `pop()` 移除列表的最后一个元素。
- 获取栈顶元素：获取列表的最后一位元素即可，可以通过索引 `list[-1]` 获取。
- 判断栈是否为空：可以通过 `if not stack` 来判定。

> 列表（以及其他一些容器，比如如字符串、元组）在空的情况下会被视为 `False`，而在非空的情况下会被视为 `True`。因此，如果一个列表为空，`not stack` 将会返回 `True`，表示列表为空；如果列表非空，`not stack` 将会返回 `False`，表示列表不为空。

```python
stack = []  # 创建一个空栈

# 入栈
stack.append(1)
stack.append(2)
stack.append(3)

# 出栈
top_element = stack.pop()  # 弹出并返回栈顶元素
print(top_element)  # 输出 3

# 判断栈是否为空
if not stack:
```

## 代码编写

照例，第一行要接收整数 n 的输入，表示栈中有 n 个盘子，之后读取一行数据，表示盘子编号, 将字符串拆分后，转为整数，最后转为列表方便遍历。

```python
# 读取初始盘子数量
n = int(input())

# 读取盘子的编号列表
plates = list(map(int, input().split()))
```

接下来接收 m 和 m 个整数的输入，表示对盘子的操作，如果数字为 1，表示盘子被拿去清洗，即出栈操作，如果数字为 2，表示有新的盘子加入到待清洗区域中，即入栈操作。

```python
# 读取操作次数
m = int(input())
# 循环处理每次操作
for _ in range(m):
    # 获取对盘子的操作，可能有1位数字或者两位数字，将之拆分成列表
    operation = input().split()
    # 第一位数字表示对盘子的操作
    opt = int(operation[0])
    # 如果数字为1，表示盘子被拿去清洗
    if opt == 1:
        # 出栈操作
    # 如果数字为2，表示盘子被拿去清洗
    elif opt == 2:
        # 入栈操作
```

但是在这里需要注意的一点是，如果栈已经成为空栈，再输入 1，也无法弹出栈顶元素，所以执行出栈操作前需要判断栈是否为空。

出栈从列表中移除最后一个元素即可，而入栈通过 `append` 来模拟实现

```python
# 操作 1: 拿走并清洗盘子
if opt == 1:
    if plates:
        # 通过pop()操作移除最后一个盘子
        cleaned_plate = plates.pop()
# 操作 2: 将未洗的盘子放入盘子堆放区
elif opt == 2:
    # 将盘子编号转为int类型
    plate_number = int(operation[1])
    # 通过append()操作向栈中添加盘子
    plates.append(plate_number)
```

当执行完所有操作后，如果没有下一个该清洗的盘子，输出 “All the dishes have been washed.” ，如果有，则输出下一个待清洗的盘子编号。

```python
# 判断盘子堆放区是否为空
if not plates:
    print("All the dishes have been washed.")
else:
    # 获取栈顶元素，即切片的最后一个元素
    print(plates[-1])
```

完整的代码如下：

```python
# 读取初始盘子数量
n = int(input())

# 读取盘子的编号列表
plates = list(map(int, input().split()))

# 读取操作次数
m = int(input())

# 循环处理每次操作
for _ in range(m):
    operation = input().split()
    opt = int(operation[0])
    
    if opt == 1:
        # 操作 1: 拿走并清洗盘子
        if plates:
            cleaned_plate = plates.pop()
    elif opt == 2:
        # 操作 2: 将未洗的盘子放入盘子堆放区
        plate_number = int(operation[1])
        plates.append(plate_number)

# 判断盘子堆放区是否为空
if not plates:
    print("All the dishes have been washed.")
else:
    print(plates[-1])
```

## 总结

本节课中，我们学习到了栈这种数据结构，知道了栈是一种后入先出的结构，并对栈的常用操作有了一些了解，下节课，我们会学习队列，这是一个常和栈拿来一起讨论的数据结构。

# 代码

```python
n = int(input())
elements = list(map(int, input().split()))
stack = []
for i in elements:
    stack.append(i)

m = int(input())
for _ in range(m):
    data = input().split()
    if data[0] == '1' and stack:
        stack.pop()
    elif data[0] == '2':
        stack.append(int(data[1]))
    
if stack:
    print(stack[-1])
else:
    print("All the dishes have been washed.")
```

